this.Bigscreen||(this.Bigscreen={}),Bigscreen.CaptionControl=function(){function e(e){this.video=e}return e.prototype.captionsData=function(){var e,t,n,i,s;for(t=this.video.parentNode.querySelectorAll("track[kind=subtitles]"),s=[],n=0,i=t.length;i>n;n++)e=t[n],s.push(this.trackData(e));return s},e.prototype.trackData=function(e){return{language:e.getAttribute("srclang"),title:e.title||e.getAttribute("srclang")}},e.prototype.render=function(){var e;return e=this.captionsData(),JST["bigscreen/templates/caption_control"]({captionsData:e})},e}();var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Bigscreen||(this.Bigscreen={}),Bigscreen.CaptionLayer=function(){function e(e){this.video=e,this.onTimeUpdate=__bind(this.onTimeUpdate,this),this.onLanguageChange=__bind(this.onLanguageChange,this),Bigscreen.Utils.Events.delegate("change",this.video.parentNode,".bigscreen-caption-control input",this.onLanguageChange),this.processedLanguages={error:"The selected language isn't available.",none:" "}}return e.prototype.onLanguageChange=function(e){var t,n;return n=e.target.value,this.processedLanguages[n]?this.setActiveLanguage(n):(t=this.video.querySelector("track[kind=subtitles][srclang="+n+"]"),this.processCaptionTrack(t))},e.prototype.processCaptionTrack=function(e){var t;return(t=e.getAttribute("src"))?(this.request=new XMLHttpRequest,this.request.open("GET",e.getAttribute("src")),this.request.onreadystatechange=function(t){return function(){return 4===t.request.readyState?200===t.request.status?(t.parseCaptions(e.getAttribute("srclang"),t.request.responseText),t.setActiveLanguage(e.getAttribute("srclang"))):t.setActiveLanguage("error"):void 0}}(this),this.request.send()):void this.setActiveLanguage("error")},e.prototype.parseCaptions=function(e,t){var n,i,s,r,a;for(r=/^[0-9]+$/,a=t.split(/\r?\n/),n=[],s=0;s<a.length;)a[s].match(r)&&(i={},i.times=this.parseTimeCode(a[s+1]),i.text=a[s+2],n.push(i)),s++;return this.processedLanguages[e]=n},e.prototype.parseTimeCode=function(e){var t,n,i,s,r,a;return a=/^([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]{1,3}) --\> ([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]{1,3})$/,i=a.exec(e),s={hours:parseInt(i[1],10),minutes:parseInt(i[2],10),seconds:parseInt(i[3],10),miliseconds:parseInt(i[4],10)},t={hours:parseInt(i[5],10),minutes:parseInt(i[6],10),seconds:parseInt(i[7],10),miliseconds:parseInt(i[8],10)},r=60*s.hours*60+60*s.minutes+s.seconds+s.miliseconds/1e3,n=60*t.hours*60+60*t.minutes+t.seconds+t.miliseconds/1e3,[r,n]},e.prototype.setActiveLanguage=function(e){return this.currentLanguage=this.processedLanguages[e],"string"==typeof this.currentLanguage?(this.video.removeEventListener("timeupdate",this.onTimeUpdate),this.showCaptionMessage(this.currentLanguage)):(this.video.removeEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("timeupdate",this.onTimeUpdate))},e.prototype.showCaptionMessage=function(e){var t;return t=this.getElement().querySelector(".bigscreen-caption-content"),t.textContent=e},e.prototype.onTimeUpdate=function(){var e,t,n,i,s,r;for(t=this.video.currentTime,s=this.currentLanguage,r=[],n=0,i=s.length;i>n;n++)e=s[n],r.push(t>=e.times[0]&&t<e.times[1]?this.showCaptionMessage(e.text):void 0);return r},e.prototype.getElement=function(){return this.video.parentNode.querySelector(".bigscreen-caption-layer")},e.prototype.render=function(){return JST["bigscreen/templates/caption_layer"]()},e}();var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Bigscreen||(this.Bigscreen={}),Bigscreen.FullscreenControl=function(){function e(e){this.video=e,this.onClick=__bind(this.onClick,this),this.isFullscreen=!1,Bigscreen.Utils.Events.delegate("click",this.video.parentNode,".bigscreen-fullscreen-control",this.onClick)}return e.prototype.onClick=function(){return this.isFullscreen===!0?this.exitFullscreen():this.enterFullscreen()},e.prototype.enterFullscreen=function(){return Bigscreen.Utils.ClassList.add("bigscreen-is-fullscreen",this.video.parentNode),this.isFullscreen=!0},e.prototype.exitFullscreen=function(){return Bigscreen.Utils.ClassList.remove("bigscreen-is-fullscreen",this.video.parentNode),this.isFullscreen=!1},e.prototype.getElement=function(){return this.video.parentNode.querySelector(".bigscreen-fullscreen-control")},e.prototype.render=function(){return JST["bigscreen/templates/fullscreen_control"]()},e}();var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Bigscreen||(this.Bigscreen={}),Bigscreen.PauseButton=function(){function e(e){this.video=e,this.onClick=__bind(this.onClick,this),this.wasPlayed=__bind(this.wasPlayed,this),this.wasPaused=__bind(this.wasPaused,this),this.video.addEventListener("pause",this.wasPaused),this.video.addEventListener("play",this.wasPlayed),Bigscreen.Utils.Events.delegate("click",this.video.parentNode,".bigscreen-pause-button",this.onClick)}return e.prototype.wasPaused=function(){return Bigscreen.Utils.ClassList.add("bigscreen-is-paused",this.video.parentNode)},e.prototype.wasPlayed=function(){return Bigscreen.Utils.ClassList.remove("bigscreen-is-paused",this.video.parentNode)},e.prototype.onClick=function(){return this.video.paused?void 0:this.video.pause()},e.prototype.render=function(){return JST["bigscreen/templates/pause_button"]()},e.prototype.getElement=function(){return this.video.parentNode.querySelector(".bigscreen-pause-button")},e}();var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Bigscreen||(this.Bigscreen={}),Bigscreen.PlayButton=function(){function e(e){this.video=e,this.onClick=__bind(this.onClick,this),this.wasPaused=__bind(this.wasPaused,this),this.wasPlayed=__bind(this.wasPlayed,this),this.video.addEventListener("play",this.wasPlayed),this.video.addEventListener("pause",this.wasPaused),Bigscreen.Utils.Events.delegate("click",this.video.parentNode,".bigscreen-play-button",this.onClick)}return e.prototype.wasPlayed=function(){return Bigscreen.Utils.ClassList.add("bigscreen-is-playing",this.video.parentNode)},e.prototype.wasPaused=function(){return Bigscreen.Utils.ClassList.remove("bigscreen-is-playing",this.video.parentNode)},e.prototype.onClick=function(){return this.video.paused?this.video.play():void 0},e.prototype.getElement=function(){return this.video.parentNode.querySelector(".bigscreen-play-button")},e.prototype.render=function(){return JST["bigscreen/templates/play_button"]()},e}();var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Bigscreen||(this.Bigscreen={}),Bigscreen.PlaybackRateControl=function(){function e(e){this.video=e,this.onOptionChange=__bind(this.onOptionChange,this),this.rateWasChanged=__bind(this.rateWasChanged,this),this.video.addEventListener("ratechange",this.rateWasChanged),Bigscreen.Utils.Events.delegate("change",this.video.parentNode,".bigscreen-playback-rate-control input",this.onOptionChange)}return e.prototype.rateWasChanged=function(){var e;return e=this.getElement().querySelector("li[data-playback-rate='"+this.video.playbackRate+"']"),e?e.querySelector("input[type=radio]").checked=!0:this.getElement().querySelector("input[type=radio][checked]").checked=!1},e.prototype.onOptionChange=function(e){return this.video.playbackRate=e.target.value},e.prototype.getElement=function(){return this.video.parentNode.querySelector(".bigscreen-playback-rate-control")},e.prototype.render=function(){return JST["bigscreen/templates/playback_rate_control"]()},e}();var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Bigscreen||(this.Bigscreen={}),Bigscreen.ProgressControl=function(){function e(e){this.video=e,this.onMouseMove=__bind(this.onMouseMove,this),this.onMouseOut=__bind(this.onMouseOut,this),this.onMouseOver=__bind(this.onMouseOver,this),this.onClick=__bind(this.onClick,this),this.setDuration=__bind(this.setDuration,this),this.onTimeUpdate=__bind(this.onTimeUpdate,this),this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("loadedmetadata",this.setDuration),Bigscreen.Utils.Events.delegate("click",this.video.parentNode,".bigscreen-progress-bar",this.onClick),Bigscreen.Utils.Events.delegate("mouseover",this.video.parentNode,".bigscreen-progress-bar",this.onMouseOver),Bigscreen.Utils.Events.delegate("mouseout",this.video.parentNode,".bigscreen-progress-bar",this.onMouseOut)}return e.prototype.onTimeUpdate=function(){return this.updateCurrentTime(),this.updateProgressBar()},e.prototype.setDuration=function(){var e;return e=this.getElement(".bigscreen-duration-label"),e.textContent=this.secondsToTimeLabel(this.video.duration)},e.prototype.updateCurrentTime=function(){var e;return e=this.getElement(".bigscreen-current-time-label"),e.textContent=this.secondsToTimeLabel(this.video.currentTime)},e.prototype.updateProgressBar=function(){var e;return e=this.video.currentTime/this.video.duration*100,this.getElement(".bigscreen-progress").setAttribute("style","width: "+e+"%")},e.prototype.onClick=function(e){var t,n;return t=this.getElement(".bigscreen-progress-bar"),n=this.relativeXOffset(e.pageX,t)/t.clientWidth,this.video.currentTime=this.video.duration*n},e.prototype.onMouseOver=function(){return this.getElement(".bigscreen-progress-bar").addEventListener("mousemove",this.onMouseMove),this.getElement(".bigscreen-progress-tooltip").setAttribute("style","display: block")},e.prototype.onMouseOut=function(){return this.getElement(".bigscreen-progress-bar").removeEventListener("mousemove",this.onMouseMove),this.getElement(".bigscreen-progress-tooltip").setAttribute("style","display: none")},e.prototype.onMouseMove=function(e){var t,n,i;return t=this.getElement(".bigscreen-progress-bar"),n=this.relativeXOffset(e.pageX,t)/t.clientWidth,i=this.getElement(".bigscreen-progress-tooltip"),i.textContent=this.secondsToTimeLabel(this.video.duration*n),i.setAttribute("style","left: "+100*n+"%")},e.prototype.getElement=function(e){var t;return t=".bigscreen-progress-control",null!=e&&(t=t+=" "+e),this.video.parentNode.querySelector(t)},e.prototype.render=function(){return JST["bigscreen/templates/progress_control"]()},e.prototype.secondsToTimeLabel=function(e){var t,n,i;return t=Math.floor(e/3600),n=Math.floor(e/60)%60,e=Math.floor(e)%60,i="",t>0&&(i+=""+this.formatTimeSegment(t)+":"),i+=""+this.formatTimeSegment(n)+":"+this.formatTimeSegment(e)},e.prototype.formatTimeSegment=function(e){var t;return t="00",(t+e).slice(-t.length)},e.prototype.relativeXOffset=function(e,t){var n;return n=t.getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft,e-n},e}(),this.Bigscreen||(this.Bigscreen={}),Bigscreen.Tv=function(){function e(e){this.video=e,Bigscreen.Utils.ClassList.add("bigscreen-is-paused",this.video.parentNode),this.features={playButton:new Bigscreen.PlayButton(e),pauseButton:new Bigscreen.PauseButton(e),playbackRateControl:Bigscreen.Utils.FeatureDetects.playbackRate?new Bigscreen.PlaybackRateControl(e):null,captionControl:new Bigscreen.CaptionControl(e),captionLayer:new Bigscreen.CaptionLayer(e),progressControl:new Bigscreen.ProgressControl(e),fullscreenControl:new Bigscreen.FullscreenControl(e)},this.render(this.features)}return e.prototype.render=function(e){var t;return t=document.createElement("div"),t.className="bigscreen-features",t.innerHTML=JST["bigscreen/templates/tv"](e),this.video.parentNode.appendChild(t)},e}(),this.Bigscreen||(this.Bigscreen={}),Bigscreen.Utils||(Bigscreen.Utils={}),Bigscreen.Utils.ClassList=function(){function e(){}return e.supportsClassList=null!=document.documentElement.classList,e.parseClassList=function(e){return""===e.className?[]:e.className.replace(/^\s+|\s+$/g,"").split(/\s+/)},e.add=function(e,t){var n;return this.supportsClassList?t.classList.add(e):(n=this.parseClassList(t),-1===n.indexOf(e)&&n.push(e),t.className=n.join(" "))},e.remove=function(e,t){var n,i;return this.supportsClassList?t.classList.remove(e):(n=this.parseClassList(t),i=n.indexOf(e),-1!==i?(n.splice(i,1),t.className=n.join(" ")):void 0)},e}(),this.Bigscreen||(this.Bigscreen={}),Bigscreen.Utils||(Bigscreen.Utils={}),Bigscreen.Utils.Enumerable=function(){function e(){}return e.includes=function(e,t){var n,i,s;if(e.indexOf)return e.indexOf(t)>=0;for(i=0,s=e.length;s>i;i++)if(n=e[i],n===t)return!0;return!1},e}(),this.Bigscreen||(this.Bigscreen={}),Bigscreen.Utils||(Bigscreen.Utils={}),Bigscreen.Utils.Events=function(){function e(){}return e.delegate=function(e,t,n,i){return t.addEventListener(e,function(e){var s,r,a,o;for(a=t.querySelectorAll(n),s=e.target,o=[];s!==t;)r=Bigscreen.Utils.Enumerable.includes(a,s),r&&i.apply(this,arguments),o.push(s=s.parentNode);return o})},e}(),this.Bigscreen||(this.Bigscreen={}),Bigscreen.Utils||(Bigscreen.Utils={}),Bigscreen.Utils.FeatureDetects=function(){function e(){}return e.playbackRate=null!=document.createElement("video").playbackRate,e}(),window.JST||(window.JST={}),window.JST["bigscreen/templates/caption_control"]=function(e){e||(e={});var t,n=[],i=function(e){return e&&e.ecoSafe?e:"undefined"!=typeof e&&null!=e?r(e):""},s=e.safe,r=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},r||(r=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,t,s,r;if(this.captionsData.length){for(n.push('\n  <div class="bigscreen-caption-control">\n    <div class="bigscreen-control-headline">\n      Caption Language\n    </div>\n    <ul>\n      <li data-caption-language="none">\n        <label>\n          <input type="radio"\n            name="bigscreen-caption-language"\n            id="bigscreen-caption-language-none"\n            value="none"\n            checked>\n          <span class="bigscreen-label-value">None</span>\n        </label>\n      </li>\n\n      '),r=this.captionsData,t=0,s=r.length;s>t;t++)e=r[t],n.push('\n        <li data-caption-language="'),n.push(i(e.language)),n.push('">\n          <label>\n            <input type="radio"\n              name="bigscreen-caption-language"\n              id="bigscreen-caption-language-'),n.push(i(e.language)),n.push('"\n              value="'),n.push(i(e.language)),n.push('">\n            <span class="bigscreen-label-value">'),n.push(i(e.title)),n.push("</span>\n          </label>\n        </li>\n      ");n.push("\n    </ul>\n  </div>\n")}n.push("\n")}).call(this)}.call(e),e.safe=s,e.escape=r,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/caption_layer"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="bigscreen-caption-layer">\n  <div class="bigscreen-caption-content">\n  </div>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/fullscreen_control"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a class="bigscreen-fullscreen-control">Toggle Fullscreen</a>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/pause_button"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a class="bigscreen-pause-button">Pause</a>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/play_button"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<a class="bigscreen-play-button">Play</a>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/playback_rate_control"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="bigscreen-playback-rate-control">\n  <div class="bigscreen-control-headline">\n    Video speed\n  </div>\n  <ul>\n    <li data-playback-rate="1">\n      <label for="bigscreen-playback-rate-normal">\n        <input type="radio"\n          name="bigscreen-playback-rate"\n          id="bigscreen-playback-rate-normal"\n          value="1"\n          checked>\n        <span class="bigscreen-label-value">Normal</span>\n      </label>\n    </li>\n    <li data-playback-rate="1.5">\n      <label for="bigscreen-playback-rate-1-5x">\n        <input type="radio"\n          name="bigscreen-playback-rate"\n          id="bigscreen-playback-rate-1-5x"\n          value="1.5">\n        <span class="bigscreen-label-value">1.5x</span>\n      </label>\n    </li>\n    <li data-playback-rate="2">\n      <label for="bigscreen-playback-rate-2-0x">\n        <input type="radio"\n          name="bigscreen-playback-rate"\n          id="bigscreen-playback-rate-2-0x"\n          value="2">\n        <span class="bigscreen-label-value">2.0x</span>\n      </label>\n    </li>\n  </ul>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/progress_control"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="bigscreen-progress-control">\n  <div class="bigscreen-time-label bigscreen-current-time-label">0:00</div>\n  <div class="bigscreen-progress-bar">\n    <div class="bigscreen-progress"></div>\n    <div class="bigscreen-progress-tooltip" style="display: none">0:00</div>\n  </div>\n  <div class="bigscreen-time-label bigscreen-duration-label">0:00</div>\n</div>\n')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")},window.JST||(window.JST={}),window.JST["bigscreen/templates/tv"]=function(e){e||(e={});var t,n=[],i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;("undefined"==typeof e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){n.push('<div class="bigscreen-layers">\n  '),n.push(this.captionLayer.render()),n.push('\n</div>\n\n<div class="bigscreen-controls">\n  '),n.push(this.playButton.render()),n.push("\n  "),n.push(this.pauseButton.render()),n.push("\n  "),n.push(this.progressControl.render()),n.push("\n  "),this.playbackRateControl&&(n.push("\n    "),n.push(this.playbackRateControl.render()),n.push("\n  ")),n.push("\n  "),n.push(this.captionControl.render()),n.push("\n  "),n.push(this.fullscreenControl.render()),n.push("\n</div>\n")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};